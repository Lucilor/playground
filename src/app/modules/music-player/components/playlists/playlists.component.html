<perfect-scrollbar (psYReachEnd)="onPsYReachEnd()">
    <ngx-ui-loader [loaderId]="'playlistLoader'"></ngx-ui-loader>

    <div *ngIf="playlist; else playlistsT">
        <mat-selection-list (selectionChange)="selectTrack($event)" [multiple]="false">
            <mat-list-option [value]="null">
                <div><mat-icon>arrow_back</mat-icon></div>
            </mat-list-option>
            <mat-list-option *ngFor="let track of playlist.tracks" [value]="track.id">
                <app-image mat-list-avatar [src]="track.al.picUrl"></app-image>
                <div mat-line>{{ track.name }}</div>
                <div mat-line>{{ getTrackSubtitle(track) }}</div>
            </mat-list-option>
        </mat-selection-list>
    </div>

    <ng-template #playlistsT>
        <mat-selection-list (selectionChange)="selectPlaylist($event)" [multiple]="false">
            <mat-list-option *ngFor="let playlist of playlists" [value]="playlist.id" [matTooltip]="playlist.description || ''">
                <app-image mat-list-avatar [src]="playlist.coverImgUrl"></app-image>
                <div mat-line>{{ playlist.name }}</div>
                <div mat-line>{{ playlist.trackCount }}首歌曲</div>
            </mat-list-option>
            <mat-list-option *ngIf="loading"> 正在加载... </mat-list-option>
            <ngx-ui-loader [loaderId]="loaderId"></ngx-ui-loader>
        </mat-selection-list>
    </ng-template>
</perfect-scrollbar>
