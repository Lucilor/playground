version: 2.1
orbs: 
    node: circleci/node@5.0.2
    browser-tools: circleci/browser-tools@1.3.0

jobs:
    lint:
        docker:
            - image: cimg/node:lts-browsers
        steps:
            - checkout
            - node/install-packages:
                pkg-manager: yarn-berry
            - run:
                name: Lint
                command: yarn lint
    unit-test:
        docker:
            - image: cimg/node:lts-browsers
        steps:
            - checkout
            - node/install-packages:
                pkg-manager: yarn-berry
            - browser-tools/install-chrome
            - browser-tools/install-chromedriver
            - run:
                name: Unit test
                command: yarn test:ci

workflows:
    test:
        jobs:
            - lint
            - unit-test:
                requires:
                    - lint
